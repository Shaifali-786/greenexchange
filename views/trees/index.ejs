<%- include("../layout/header") %>


  <section class="hero-section text-white">
    <div class="hero-overlay">
      <div class="container text-center">
        <h1 class="fw-bold display-5">
          Grow Trees. Earn Carbon Credits.
        </h1>
        <p class="lead mt-3 mb-4">
          A transparent agriculture-based carbon marketplace for a greener future
        </p>

        <a href="#marketplace" class="btn btn-success btn-lg mt-1">
          ğŸŒ± Explore Marketplace
        </a>

        <a href="/trees/new" class="btn btn-outline-light btn-lg px-4">
          + Plant Tree
        </a>
      </div>
    </div>
  </section>



  <section id="marketplace" class="marketplace-section">
  <div class="container">

      <!-- HEADER -->
      <div class="marketplace-header text-center mb-5">
        <h2>ğŸŒ Tree Marketplace</h2>
        <p class="text-muted">
          Buy verified trees & contribute to a greener planet
        </p>
      </div>

      <!-- EMPTY -->
      <% if (trees.length===0) { %>
        <p class="text-center empty-state">
          ğŸŒ± No trees planted yet. Be the first one!
        </p>
        <% } %>

          <!-- GRID -->
          <div class="row g-4">
            <% trees.forEach(tree=> { %>

              <div class="col-lg-4 col-md-6">
                <div class="card tree-card h-100">

                  <!-- IMAGE -->
                  <img src="<%= tree.image %>" class="tree-img card-img-top">

                  <div class="card-body d-flex flex-column">

                    <!-- PRICE + STATUS -->
                    <div class="d-flex justify-content-between align-items-center mb-2">
                      <span class="price-tag">â‚¹ <%= tree.price %></span>

                      <% if (tree.status.toLowerCase()==="pending" ) { %>
                        <span class="badge bg-secondary badge-status">Pending</span>
                        <% } else if (tree.status.toLowerCase()==="verified" ) { %>
                          <span class="badge bg-success badge-status">Verified</span>
                          <% } else { %>
                            <span class="badge bg-danger badge-status">Sold</span>
                            <% } %>
                    </div>

                    <!-- INFO -->
                    <p class="text-muted mb-3">
                      ğŸ“ <b>District:</b>
                      <%= tree.Distric %>
                    </p>

                    <!-- ACTION -->
                    <div class="mt-auto">
                      <% if (tree.status.toLowerCase()==="verified" ) { %>
                        <form action="/trees/<%= tree._id %>/buy" method="POST">
                          <button class="btn btn-success buy-btn w-100">
                            ğŸŒ± Buy Tree
                          </button>
                        </form>

                        <% } else if (tree.status.toLowerCase()==="pending" ) { %>
                          <button class="btn btn-outline-secondary buy-btn w-100" disabled>
                            Awaiting Verification
                          </button>

                          <% } else { %>
                            <button class="btn btn-outline-danger buy-btn w-100" disabled>
                              Sold Out
                            </button>
                            <% } %>
                    </div>

                  </div>
                </div>
              </div>

              <% }) %>
          </div>

    </div>
  </section>

  <%- include("../layout/footer") %>